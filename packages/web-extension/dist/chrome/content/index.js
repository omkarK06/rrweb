(function(w){typeof define=="function"&&define.amd?define(w):w()})(function(){"use strict";var re=Object.defineProperty;var se=(w,p,m)=>p in w?re(w,p,{enumerable:!0,configurable:!0,writable:!0,value:m}):w[p]=m;var B=(w,p,m)=>(se(w,typeof p!="symbol"?p+"":p,m),m);var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p={exports:{}};(function(e,n){(function(i,t){t(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:w,function(i){var t,A;if(!((A=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&A.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const C="The message port closed before a response was received.",l=c=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class L extends WeakMap{constructor(s,o=void 0){super(o),this.createItem=s}get(s){return this.has(s)||this.set(s,this.createItem(s)),super.get(s)}}const N=r=>r&&typeof r=="object"&&typeof r.then=="function",j=(r,s)=>(...o)=>{c.runtime.lastError?r.reject(new Error(c.runtime.lastError.message)):s.singleCallbackArg||o.length<=1&&s.singleCallbackArg!==!1?r.resolve(o[0]):r.resolve(o)},S=r=>r==1?"argument":"arguments",Q=(r,s)=>function(g,...u){if(u.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${S(s.minArgs)} for ${r}(), got ${u.length}`);if(u.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${S(s.maxArgs)} for ${r}(), got ${u.length}`);return new Promise((x,f)=>{if(s.fallbackToNoCallback)try{g[r](...u,j({resolve:x,reject:f},s))}catch(a){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),g[r](...u),s.fallbackToNoCallback=!1,s.noCallback=!0,x()}else s.noCallback?(g[r](...u),x()):g[r](...u,j({resolve:x,reject:f},s))})},U=(r,s,o)=>new Proxy(s,{apply(g,u,x){return o.call(u,r,...x)}});let _=Function.call.bind(Object.prototype.hasOwnProperty);const $=(r,s={},o={})=>{let g=Object.create(null),u={has(f,a){return a in r||a in g},get(f,a,b){if(a in g)return g[a];if(!(a in r))return;let d=r[a];if(typeof d=="function")if(typeof s[a]=="function")d=U(r,r[a],s[a]);else if(_(o,a)){let k=Q(a,o[a]);d=U(r,r[a],k)}else d=d.bind(r);else if(typeof d=="object"&&d!==null&&(_(s,a)||_(o,a)))d=$(d,s[a],o[a]);else if(_(o,"*"))d=$(d,s[a],o["*"]);else return Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get(){return r[a]},set(k){r[a]=k}}),d;return g[a]=d,d},set(f,a,b,d){return a in g?g[a]=b:r[a]=b,!0},defineProperty(f,a,b){return Reflect.defineProperty(g,a,b)},deleteProperty(f,a){return Reflect.deleteProperty(g,a)}},x=Object.create(r);return new Proxy(x,u)},D=r=>({addListener(s,o,...g){s.addListener(r.get(o),...g)},hasListener(s,o){return s.hasListener(r.get(o))},removeListener(s,o){s.removeListener(r.get(o))}}),X=new L(r=>typeof r!="function"?r:function(o){const g=$(o,{},{getContent:{minArgs:0,maxArgs:0}});r(g)}),q=new L(r=>typeof r!="function"?r:function(o,g,u){let x=!1,f,a=new Promise(P=>{f=function(v){x=!0,P(v)}}),b;try{b=r(o,g,f)}catch(P){b=Promise.reject(P)}const d=b!==!0&&N(b);if(b!==!0&&!d&&!x)return!1;const k=P=>{P.then(v=>{u(v)},v=>{let I;v&&(v instanceof Error||typeof v.message=="string")?I=v.message:I="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:I})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return k(d?b:a),!0}),Y=({reject:r,resolve:s},o)=>{c.runtime.lastError?c.runtime.lastError.message===C?s():r(new Error(c.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):s(o)},W=(r,s,o,...g)=>{if(g.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${S(s.minArgs)} for ${r}(), got ${g.length}`);if(g.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${S(s.maxArgs)} for ${r}(), got ${g.length}`);return new Promise((u,x)=>{const f=Y.bind(null,{resolve:u,reject:x});g.push(f),o.sendMessage(...g)})},ee={devtools:{network:{onRequestFinished:D(X)}},runtime:{onMessage:D(q),onMessageExternal:D(q),sendMessage:W.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:W.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},F={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":F},services:{"*":F},websites:{"*":F}},$(c,ee,h)};i.exports=l(chrome)}else i.exports=globalThis.browser})})(p);const m=p.exports;let G=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,i)=>(i&=63,i<36?n+=i.toString(36):i<62?n+=(i-26).toString(36).toUpperCase():i>62?n+="-":n+="_",n),"");var y=(e=>(e.recorderStatus="recorder_status",e.bufferedEvents="buffered_events",e))(y||{}),M=(e=>(e.IDLE="IDLE",e.RECORDING="RECORDING",e.PAUSED="PAUSED",e.PausedSwitch="PAUSED_SWITCH",e))(M||{}),R=(e=>(e.StartRecord="start-record",e.StopRecord="stop-record",e.PauseRecord="pause-record",e.ResumeRecord="resume-record",e))(R||{}),E=(e=>(e.RecordScriptReady="rrweb-extension-record-script-ready",e.StartRecord="rrweb-extension-start-record",e.RecordStarted="rrweb-extension-record-started",e.StopRecord="rrweb-extension-stop-record",e.RecordStopped="rrweb-extension-record-stopped",e.EmitEvent="rrweb-extension-emit-event",e))(E||{});function J(e){return{all:e=e||new Map,on:function(n,i){var t=e.get(n);t?t.push(i):e.set(n,[i])},off:function(n,i){var t=e.get(n);t&&(i?t.splice(t.indexOf(i)>>>0,1):e.set(n,[]))},emit:function(n,i){var t=e.get(n);t&&t.slice().map(function(A){A(i)}),(t=e.get("*"))&&t.slice().map(function(A){A(n,i)})}}}class V{constructor(){B(this,"services",new Map);B(this,"emitter",J());m.runtime.onMessage.addListener(((n,i)=>{const t=JSON.parse(n);if(!t||!t.type){console.error(`Bad message: ${n}`);return}switch(t.type){case"event":this.emitter.emit(t.event,{detail:t.detail,sender:i});break;case"service":{const A=this.services.get(t.service);if(!A)break;return A(t.params,i)}default:console.error(`Unknown message type: ${t.type}`);break}}).bind(this))}provide(n,i){return this.services.set(n,i),()=>{this.services.delete(n)}}request(n,i){const t=JSON.stringify({type:"service",service:n,params:i});return m.runtime.sendMessage(t)}requestToTab(n,i,t){if(!m.tabs||!m.tabs.sendMessage)return Promise.reject("Can not send message to tabs in current context!");const A=JSON.stringify({type:"service",service:i,params:t});return m.tabs.sendMessage(n,A)}on(n,i){const t=A=>{i(A.detail,A.sender)};return this.emitter.on(n,t)}emit(n,i){const t=JSON.stringify({type:"event",event:n,detail:i});m.runtime.sendMessage(t)}emitToTabs(n,i,t){if(!m.tabs||!m.tabs.sendMessage)return Promise.reject("Can not send message to tabs in current context!");typeof n=="number"&&(n=[n]);const A=JSON.stringify({type:"event",event:i,detail:t});n.forEach(C=>void m.tabs.sendMessage(C,A))}async getCurrentTabId(){return(await m.tabs.query({active:!0,currentWindow:!0}))[0].id||-1}}function H(){if(window.parent!==window)try{window.parent.location.origin}catch{return!0}return!1}const O=new V;window.addEventListener("message",e=>{e.source===window&&e.data.message===E.RecordScriptReady&&window.postMessage({message:E.StartRecord,config:{recordCrossOriginIframes:!0}},location.origin)}),H()?z():window===window.top&&Z();async function Z(){var C;let e=[],n=[],i;O.provide(R.StartRecord,async()=>(T(),new Promise(l=>{i=c=>{l(c)}}))),O.provide(R.ResumeRecord,async l=>{const{events:c,pausedTimestamp:h}=l;return e=c,T(),new Promise(L=>{i=N=>{const j=N.startTimestamp-h;e.forEach(S=>{S.timestamp+=j}),L(N)}})});let t;O.provide(R.StopRecord,()=>(window.postMessage({message:E.StopRecord}),new Promise(l=>{t=c=>{t=void 0;const h=K();c.session=h,e=[],n=[],l(c),m.storage.local.set({[y.bufferedEvents]:[]})}}))),O.provide(R.PauseRecord,()=>(window.postMessage({message:E.StopRecord}),new Promise(l=>{t=c=>{t=void 0,e=[],n=[],l(c),m.storage.local.set({[y.bufferedEvents]:c.events})}}))),window.addEventListener("message",l=>{if(l.source===window)if(l.data.message===E.RecordStarted&&i)i(l.data);else if(l.data.message===E.RecordStopped&&t){const c=l.data,h={...c};h.events=e.concat(c.events),t(h)}else l.data.message===E.EmitEvent&&n.push(l.data.event)});const A=await m.storage.local.get();((C=A==null?void 0:A[y.recorderStatus])==null?void 0:C.status)===M.RECORDING&&(T(),e=A[y.bufferedEvents]||[]),window.addEventListener("beforeunload",l=>{l.preventDefault(),n.length!==0&&m.storage.local.set({[y.bufferedEvents]:e.concat(n)})})}async function z(){var n;m.storage.local.onChanged.addListener(i=>{i[y.recorderStatus]&&(i[y.recorderStatus].newValue.status===M.RECORDING?T():window.postMessage({message:E.StopRecord},location.origin))});const e=await m.storage.local.get();((n=e==null?void 0:e[y.recorderStatus])==null?void 0:n.status)===M.RECORDING&&T()}function T(){const e=document.createElement("script");e.src=m.runtime.getURL("content/inject.js"),document.documentElement.appendChild(e),e.onload=()=>{document.documentElement.removeChild(e)}}function K(){return{id:G(),name:document.title,tags:[],createTimestamp:Date.now(),modifyTimestamp:Date.now(),recorderVersion:m.runtime.getManifest().version_name||"unknown"}}});
