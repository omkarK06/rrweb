(function(){"use strict";var F;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(F||(F={}));function At(e){return e.nodeType===e.ELEMENT_NODE}function Se(e){var t=e==null?void 0:e.host;return Boolean((t==null?void 0:t.shadowRoot)===e)}function ve(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Wt(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Pt(e){var t=e.cssText;if(t.split('"').length<3)return t;var r=["@import","url(".concat(JSON.stringify(e.href),")")];return e.layerName===""?r.push("layer"):e.layerName&&r.push("layer(".concat(e.layerName,")")),e.supportsText&&r.push("supports(".concat(e.supportsText,")")),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function Re(e){try{var t=e.rules||e.cssRules;return t?Wt(Array.from(t,Ke).join("")):null}catch{return null}}function Ke(e){var t;if(Ut(e))try{t=Re(e.styleSheet)||Pt(e)}catch{}else if(zt(e)&&e.selectorText.includes(":"))return Ht(e.cssText);return t||e.cssText}function Ht(e){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Ut(e){return"styleSheet"in e}function zt(e){return"selectorText"in e}var et=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n!=null?n:-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function jt(){return new et}function ze(e){var t=e.element,r=e.maskInputOptions,n=e.tagName,o=e.type,s=e.value,d=e.maskInputFn,l=s||"",a=o&&le(o);return(r[n.toLowerCase()]||a&&r[a])&&(d?l=d(l,t):l="*".repeat(l.length)),l}function le(e){return e.toLowerCase()}var tt="__rrweb_original__";function Bt(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var s=t.getImageData,d=tt in s?s[tt]:s,l=new Uint32Array(d.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(l.some(function(a){return a!==0}))return!1}return!0}function je(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?le(t):null}var Gt=1,Vt=new RegExp("[^a-z0-9-_:]"),be=-2;function rt(){return Gt++}function qt(e){if(e instanceof HTMLFormElement)return"form";var t=le(e.tagName);return Vt.test(t)?"div":t}function $t(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var fe,nt,Xt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Yt=/^(?:[a-z+]+:)?\/\//i,Jt=/^www\..*/i,Zt=/^(data:)([^,]*),(.*)/i;function Le(e,t){return(e||"").replace(Xt,function(r,n,o,s,d,l){var a=o||d||l,c=n||s||"";if(!a)return r;if(Yt.test(a)||Jt.test(a)||Zt.test(a))return"url(".concat(c).concat(a).concat(c,")");if(a[0]==="/")return"url(".concat(c).concat($t(t)+a).concat(c,")");var i=t.split("/"),u=a.split("/");i.pop();for(var h=0,p=u;h<p.length;h++){var f=p[h];f!=="."&&(f===".."?i.pop():i.push(f))}return"url(".concat(c).concat(i.join("/")).concat(c,")")})}var Qt=/^[^ \t\n\r\u000c]+/,Kt=/^[, \t\n\r\u000c]+/;function er(e,t){if(t.trim()==="")return t;var r=0;function n(c){var i,u=c.exec(t.substring(r));return u?(i=u[0],r+=i.length,i):""}for(var o=[];n(Kt),!(r>=t.length);){var s=n(Qt);if(s.slice(-1)===",")s=pe(e,s.substring(0,s.length-1)),o.push(s);else{var d="";s=pe(e,s);for(var l=!1;;){var a=t.charAt(r);if(a===""){o.push((s+d).trim());break}else if(l)a===")"&&(l=!1);else if(a===","){r+=1,o.push((s+d).trim());break}else a==="("&&(l=!0);d+=a,r+=1}}}return o.join(", ")}function pe(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function tr(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function Be(){var e=document.createElement("a");return e.href="",e.href}function ot(e,t,r,n){return n&&(r==="src"||r==="href"&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(t==="table"||t==="td"||t==="th")?pe(e,n):r==="srcset"?er(e,n):r==="style"?Le(n,Be()):t==="object"&&r==="data"?pe(e,n):n)}function at(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function rr(e,t,r){try{if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}if(r)return e.matches(r)}catch{}return!1}function Ee(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?Ee(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?Ee(e.parentNode,t,r):!1}function st(e,t,r){try{var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(Ee(n,t,!0))return!0;if(r&&(n.matches(r)||n.closest(r)))return!0}catch{}return!1}function nr(e,t,r){var n=e.contentWindow;if(!!n){var o=!1,s;try{s=n.document.readyState}catch{return}if(s!=="complete"){var d=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(d),o=!0,t()});return}var l="about:blank";if(n.location.href!==l||e.src===l||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function or(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var s=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(s),n=!0,t()})}}function ar(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,s=t.blockSelector,d=t.maskTextClass,l=t.maskTextSelector,a=t.inlineStylesheet,c=t.maskInputOptions,i=c===void 0?{}:c,u=t.maskTextFn,h=t.maskInputFn,p=t.dataURLOptions,f=p===void 0?{}:p,m=t.inlineImages,S=t.recordCanvas,I=t.keepIframeSrcFn,g=t.newlyAddedElement,y=g===void 0?!1:g,C=sr(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:F.Document,childNodes:[],compatMode:e.compatMode}:{type:F.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:F.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return lr(e,{doc:r,blockClass:o,blockSelector:s,inlineStylesheet:a,maskInputOptions:i,maskInputFn:h,dataURLOptions:f,inlineImages:m,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:y,rootId:C});case e.TEXT_NODE:return ir(e,{maskTextClass:d,maskTextSelector:l,maskTextFn:u,rootId:C});case e.CDATA_SECTION_NODE:return{type:F.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:F.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}function sr(e,t){if(!!t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function ir(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,s=t.maskTextFn,d=t.rootId,l=e.parentNode&&e.parentNode.tagName,a=e.textContent,c=l==="STYLE"?!0:void 0,i=l==="SCRIPT"?!0:void 0;if(c&&a){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(a=Re(e.parentNode.sheet))}catch(u){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(u),e)}a=Le(a,Be())}return i&&(a="SCRIPT_PLACEHOLDER"),!c&&!i&&a&&st(e,n,o)&&(a=s?s(a,e.parentElement):a.replace(/[\S]/g,"*")),{type:F.Text,textContent:a||"",isStyle:c,rootId:d}}function lr(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,s=t.inlineStylesheet,d=t.maskInputOptions,l=d===void 0?{}:d,a=t.maskInputFn,c=t.dataURLOptions,i=c===void 0?{}:c,u=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,f=t.newlyAddedElement,m=f===void 0?!1:f,S=t.rootId,I=rr(e,n,o),g=qt(e),y={},C=e.attributes.length,x=0;x<C;x++){var E=e.attributes[x];at(g,E.name,E.value)||(y[E.name]=ot(r,g,le(E.name),E.value))}if(g==="link"&&s){var _=Array.from(r.styleSheets).find(function($){return $.href===e.href}),k=null;_&&(k=Re(_)),k&&(delete y.rel,delete y.href,y._cssText=Le(k,_.href))}if(g==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var k=Re(e.sheet);k&&(y._cssText=Le(k,Be()))}if(g==="input"||g==="textarea"||g==="select"){var X=e.value,U=e.checked;if(y.type!=="radio"&&y.type!=="checkbox"&&y.type!=="submit"&&y.type!=="button"&&X){var G=je(e);y.value=ze({element:e,type:G,tagName:g,value:X,maskInputOptions:l,maskInputFn:a})}else U&&(y.checked=U)}if(g==="option"&&(e.selected&&!l.select?y.selected=!0:delete y.selected),g==="canvas"&&h){if(e.__context==="2d")Bt(e)||(y.rr_dataURL=e.toDataURL(i.type,i.quality));else if(!("__context"in e)){var V=e.toDataURL(i.type,i.quality),B=document.createElement("canvas");B.width=e.width,B.height=e.height;var ae=B.toDataURL(i.type,i.quality);V!==ae&&(y.rr_dataURL=V)}}if(g==="img"&&u){fe||(fe=r.createElement("canvas"),nt=fe.getContext("2d"));var D=e,Y=D.crossOrigin;D.crossOrigin="anonymous";var J=function(){D.removeEventListener("load",J);try{fe.width=D.naturalWidth,fe.height=D.naturalHeight,nt.drawImage(D,0,0),y.rr_dataURL=fe.toDataURL(i.type,i.quality)}catch($){console.warn("Cannot inline img src=".concat(D.currentSrc,"! Error: ").concat($))}Y?y.crossOrigin=Y:D.removeAttribute("crossorigin")};D.complete&&D.naturalWidth!==0?J():D.addEventListener("load",J)}if((g==="audio"||g==="video")&&(y.rr_mediaState=e.paused?"paused":"played",y.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(y.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(y.rr_scrollTop=e.scrollTop)),I){var Q=e.getBoundingClientRect(),q=Q.width,K=Q.height;y={class:y.class,rr_width:"".concat(q,"px"),rr_height:"".concat(K,"px")}}return g==="iframe"&&!p(y.src)&&(e.contentDocument||(y.rr_src=y.src),delete y.src),{type:F.Element,tagName:g,attributes:y,childNodes:[],isSVG:tr(e)||void 0,needBlock:I,rootId:S}}function O(e){return e==null?"":e.toLowerCase()}function dr(e,t){if(t.comment&&e.type===F.Comment)return!0;if(e.type===F.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(O(e.attributes.name).match(/^msapplication-tile(image|color)$/)||O(e.attributes.name)==="application-name"||O(e.attributes.rel)==="icon"||O(e.attributes.rel)==="apple-touch-icon"||O(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&O(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(O(e.attributes.property).match(/^(og|twitter|fb):/)||O(e.attributes.name).match(/^(og|twitter):/)||O(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(O(e.attributes.name)==="robots"||O(e.attributes.name)==="googlebot"||O(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(O(e.attributes.name)==="author"||O(e.attributes.name)==="generator"||O(e.attributes.name)==="framework"||O(e.attributes.name)==="publisher"||O(e.attributes.name)==="progid"||O(e.attributes.property).match(/^article:/)||O(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(O(e.attributes.name)==="google-site-verification"||O(e.attributes.name)==="yandex-verification"||O(e.attributes.name)==="csrf-token"||O(e.attributes.name)==="p:domain_verify"||O(e.attributes.name)==="verify-v1"||O(e.attributes.name)==="verification"||O(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function he(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,s=t.blockSelector,d=t.maskTextClass,l=t.maskTextSelector,a=t.skipChild,c=a===void 0?!1:a,i=t.inlineStylesheet,u=i===void 0?!0:i,h=t.maskInputOptions,p=h===void 0?{}:h,f=t.maskTextFn,m=t.maskInputFn,S=t.slimDOMOptions,I=t.dataURLOptions,g=I===void 0?{}:I,y=t.inlineImages,C=y===void 0?!1:y,x=t.recordCanvas,E=x===void 0?!1:x,_=t.onSerialize,k=t.onIframeLoad,X=t.iframeLoadTimeout,U=X===void 0?5e3:X,G=t.onStylesheetLoad,V=t.stylesheetLoadTimeout,B=V===void 0?5e3:V,ae=t.keepIframeSrcFn,D=ae===void 0?function(){return!1}:ae,Y=t.newlyAddedElement,J=Y===void 0?!1:Y,Q=t.preserveWhiteSpace,q=Q===void 0?!0:Q,K=ar(e,{doc:r,mirror:n,blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:l,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:m,dataURLOptions:g,inlineImages:C,recordCanvas:E,keepIframeSrcFn:D,newlyAddedElement:J});if(!K)return console.warn(e,"not serialized"),null;var $;n.hasNode(e)?$=n.getId(e):dr(K,S)||!q&&K.type===F.Text&&!K.isStyle&&!K.textContent.replace(/^\s+|\s+$/gm,"").length?$=be:$=rt();var N=Object.assign(K,{id:$});if(n.add(e,N),$===be)return null;_&&_(e);var se=!c;if(N.type===F.Element){se=se&&!N.needBlock,delete N.needBlock;var Oe=e.shadowRoot;Oe&&ve(Oe)&&(N.isShadowHost=!0)}if((N.type===F.Document||N.type===F.Element)&&se){S.headWhitespace&&N.type===F.Element&&N.tagName==="head"&&(q=!1);for(var Te={doc:r,mirror:n,blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:l,skipChild:c,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:m,slimDOMOptions:S,dataURLOptions:g,inlineImages:C,recordCanvas:E,preserveWhiteSpace:q,onSerialize:_,onIframeLoad:k,iframeLoadTimeout:U,onStylesheetLoad:G,stylesheetLoadTimeout:B,keepIframeSrcFn:D},xe=0,te=Array.from(e.childNodes);xe<te.length;xe++){var ee=te[xe],re=he(ee,Te);re&&N.childNodes.push(re)}if(At(e)&&e.shadowRoot)for(var ie=0,v=Array.from(e.shadowRoot.childNodes);ie<v.length;ie++){var ee=v[ie],re=he(ee,Te);re&&(ve(e.shadowRoot)&&(re.isShadow=!0),N.childNodes.push(re))}}return e.parentNode&&Se(e.parentNode)&&ve(e.parentNode)&&(N.isShadow=!0),N.type===F.Element&&N.tagName==="iframe"&&nr(e,function(){var W=e.contentDocument;if(W&&k){var T=he(W,{doc:W,mirror:n,blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:l,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:m,slimDOMOptions:S,dataURLOptions:g,inlineImages:C,recordCanvas:E,preserveWhiteSpace:q,onSerialize:_,onIframeLoad:k,iframeLoadTimeout:U,onStylesheetLoad:G,stylesheetLoadTimeout:B,keepIframeSrcFn:D});T&&k(e,T)}},U),N.type===F.Element&&N.tagName==="link"&&N.attributes.rel==="stylesheet"&&or(e,function(){if(G){var W=he(e,{doc:r,mirror:n,blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:l,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:f,maskInputFn:m,slimDOMOptions:S,dataURLOptions:g,inlineImages:C,recordCanvas:E,preserveWhiteSpace:q,onSerialize:_,onIframeLoad:k,iframeLoadTimeout:U,onStylesheetLoad:G,stylesheetLoadTimeout:B,keepIframeSrcFn:D});W&&G(e,W)}},B),N}function cr(e,t){var r=t||{},n=r.mirror,o=n===void 0?new et:n,s=r.blockClass,d=s===void 0?"rr-block":s,l=r.blockSelector,a=l===void 0?null:l,c=r.maskTextClass,i=c===void 0?"rr-mask":c,u=r.maskTextSelector,h=u===void 0?null:u,p=r.inlineStylesheet,f=p===void 0?!0:p,m=r.inlineImages,S=m===void 0?!1:m,I=r.recordCanvas,g=I===void 0?!1:I,y=r.maskAllInputs,C=y===void 0?!1:y,x=r.maskTextFn,E=r.maskInputFn,_=r.slimDOM,k=_===void 0?!1:_,X=r.dataURLOptions,U=r.preserveWhiteSpace,G=r.onSerialize,V=r.onIframeLoad,B=r.iframeLoadTimeout,ae=r.onStylesheetLoad,D=r.stylesheetLoadTimeout,Y=r.keepIframeSrcFn,J=Y===void 0?function(){return!1}:Y,Q=C===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:C===!1?{password:!0}:C,q=k===!0||k==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:k==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:k===!1?{}:k;return he(e,{doc:e,mirror:o,blockClass:d,blockSelector:a,maskTextClass:i,maskTextSelector:h,skipChild:!1,inlineStylesheet:f,maskInputOptions:Q,maskTextFn:x,maskInputFn:E,slimDOMOptions:q,dataURLOptions:X,inlineImages:S,recordCanvas:g,preserveWhiteSpace:U,onSerialize:G,onIframeLoad:V,iframeLoadTimeout:B,onStylesheetLoad:ae,stylesheetLoadTimeout:D,keepIframeSrcFn:J,newlyAddedElement:!1})}function P(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const me=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let it={map:{},getId(){return console.error(me),-1},getNode(){return console.error(me),null},removeNodeFromMap(){console.error(me)},has(){return console.error(me),!1},reset(){console.error(me)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(it=new Proxy(it,{get(e,t,r){return t==="map"&&console.error(me),Reflect.get(e,t,r)}}));function Ie(e,t,r={}){let n=null,o=0;return function(...s){const d=Date.now();!o&&r.leading===!1&&(o=d);const l=t-(d-o),a=this;l<=0||l>t?(n&&(clearTimeout(n),n=null),o=d,e.apply(a,s)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(a,s)},l))}}function Ne(e,t,r,n,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(d){setTimeout(()=>{r.set.call(this,d)},0),s&&s.set&&s.set.call(this,d)}}),()=>Ne(e,t,s||{},!0)}function we(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}let _e=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(_e=()=>new Date().getTime());function lt(e){var t,r,n,o,s,d;const l=e.document;return{left:l.scrollingElement?l.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(l==null?void 0:l.documentElement.scrollLeft)||((r=(t=l==null?void 0:l.body)===null||t===void 0?void 0:t.parentElement)===null||r===void 0?void 0:r.scrollLeft)||((n=l==null?void 0:l.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:l.scrollingElement?l.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(l==null?void 0:l.documentElement.scrollTop)||((s=(o=l==null?void 0:l.body)===null||o===void 0?void 0:o.parentElement)===null||s===void 0?void 0:s.scrollTop)||((d=l==null?void 0:l.body)===null||d===void 0?void 0:d.scrollTop)||0}}function dt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ct(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ut(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function H(e,t,r,n){if(!e)return!1;const o=ut(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Ee(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function ur(e,t){return t.getId(e)!==-1}function Ge(e,t){return t.getId(e)===be}function ft(e,t){if(Se(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?ft(e.parentNode,t):!0:!0}function Ve(e){return Boolean(e.changedTouches)}function fr(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function pt(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function ht(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function qe(e){return Boolean(e==null?void 0:e.shadowRoot)}class pr{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function mt(e){var t,r;let n=null;return((r=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||r===void 0?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function hr(e){let t=e,r;for(;r=mt(t);)t=r;return t}function mr(e){const t=e.ownerDocument;if(!t)return!1;const r=hr(e);return t.contains(r)}function yt(e){const t=e.ownerDocument;return t?t.contains(e)||mr(e):!1}var M=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(M||{}),w=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(w||{}),j=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(j||{}),ne=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ne||{}),ye=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ye||{});function gt(e){return"__ln"in e}class yr{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=(r==null?void 0:r.next)||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&gt(t.previousSibling)){const n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&gt(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){const r=t.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const St=(e,t)=>`${e}@${t}`;class gr{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new Set,n=new yr,o=a=>{let c=a,i=be;for(;i===be;)c=c&&c.nextSibling,i=c&&this.mirror.getId(c);return i},s=a=>{if(!a.parentNode||!yt(a))return;const c=Se(a.parentNode)?this.mirror.getId(mt(a)):this.mirror.getId(a.parentNode),i=o(a);if(c===-1||i===-1)return n.addNode(a);const u=he(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{pt(h,this.mirror)&&this.iframeManager.addIframe(h),ht(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),qe(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,this.doc)},onIframeLoad:(h,p)=>{this.iframeManager.attachIframe(h,p),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,p)=>{this.stylesheetManager.attachLinkElement(h,p)}});u&&(t.push({parentId:c,nextId:i,node:u}),r.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)vt(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||s(a);for(const a of this.addedSet)!It(this.droppedSet,a)&&!vt(this.removes,a,this.mirror)||It(this.movedSet,a)?s(a):this.droppedSet.add(a);let d=null;for(;n.length;){let a=null;if(d){const c=this.mirror.getId(d.value.parentNode),i=o(d.value);c!==-1&&i!==-1&&(a=d)}if(!a){let c=n.tail;for(;c;){const i=c;if(c=c.previous,i){const u=this.mirror.getId(i.value.parentNode);if(o(i.value)===-1)continue;if(u!==-1){a=i;break}else{const p=i.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const f=p.parentNode.host;if(this.mirror.getId(f)!==-1){a=i;break}}}}}}if(!a){for(;n.head;)n.removeNode(n.head.value);break}d=a.previous,n.removeNode(a.value),s(a.value)}const l={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>!r.has(a.id)).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>{const{attributes:c}=a;if(typeof c.style=="string"){const i=JSON.stringify(a.styleDiff),u=JSON.stringify(a._unchangedStyles);i.length<c.style.length&&(i+u).split("var(").length===c.style.split("var(").length&&(c.style=a.styleDiff)}return{id:this.mirror.getId(a.node),attributes:c}}).filter(a=>!r.has(a.id)).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(Ge(t.target,this.mirror))return;let r;try{r=document.implementation.createHTMLDocument()}catch{r=this.doc}switch(t.type){case"characterData":{const n=t.target.textContent;!H(t.target,this.blockClass,this.blockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:st(t.target,this.maskTextClass,this.maskTextSelector)&&n?this.maskTextFn?this.maskTextFn(n,ut(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let o=t.attributeName,s=t.target.getAttribute(o);if(o==="value"){const l=je(n);s=ze({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:l,value:s,maskInputFn:this.maskInputFn})}if(H(t.target,this.blockClass,this.blockSelector,!1)||s===t.oldValue)return;let d=this.attributes.find(l=>l.node===t.target);if(n.tagName==="IFRAME"&&o==="src"&&!this.keepIframeSrcFn(s))if(!n.contentDocument)o="rr_src";else return;if(d||(d={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(d)),o==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!at(n.tagName,o)&&(d.attributes[o]=ot(this.doc,le(n.tagName),le(o),s),o==="style")){const l=r.createElement("span");t.oldValue&&l.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),i=n.style.getPropertyPriority(a);c!==l.style.getPropertyValue(a)||i!==l.style.getPropertyPriority(a)?i===""?d.styleDiff[a]=c:d.styleDiff[a]=[c,i]:d._unchangedStyles[a]=[c,i]}for(const a of Array.from(l.style))n.style.getPropertyValue(a)===""&&(d.styleDiff[a]=!1)}break}case"childList":{if(H(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const o=this.mirror.getId(n),s=Se(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);H(t.target,this.blockClass,this.blockSelector,!1)||Ge(n,this.mirror)||!ur(n,this.mirror)||(this.addedSet.has(n)?($e(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&o===-1||ft(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[St(o,s)]?$e(this.movedSet,n):this.removes.push({parentId:s,id:o,isShadow:Se(t.target)&&ve(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Ge(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[St(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);H(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach(n=>this.genAdds(n)),qe(t)&&t.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function $e(e,t){e.delete(t),t.childNodes.forEach(r=>$e(e,r))}function vt(e,t,r){return e.length===0?!1:bt(e,t,r)}function bt(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return e.some(s=>s.id===o)?!0:bt(e,n,r)}function It(e,t){return e.size===0?!1:wt(e,t)}function wt(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:wt(e,r):!1}let Me;function Sr(e){Me=e}function vr(){Me=void 0}const b=e=>Me?(...r)=>{try{return e(...r)}catch(n){if(Me&&Me(n)===!0)return;throw n}}:e,de=[];function Ce(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Mt(e,t){var r,n;const o=new gr;de.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const d=(n=(r=window==null?void 0:window.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");d&&window[d]&&(s=window[d]);const l=new s(b(o.processMutations.bind(o)));return l.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function br({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let d=[],l;const a=Ie(b(u=>{const h=Date.now()-l;e(d.map(p=>(p.timeOffset-=h,p)),u),d=[],l=null}),s),c=b(Ie(b(u=>{const h=Ce(u),{clientX:p,clientY:f}=Ve(u)?u.changedTouches[0]:u;l||(l=_e()),d.push({x:p,y:f,id:n.getId(h),timeOffset:_e()-l}),a(typeof DragEvent<"u"&&u instanceof DragEvent?w.Drag:u instanceof MouseEvent?w.MouseMove:w.TouchMove)}),o,{trailing:!1})),i=[P("mousemove",c,r),P("touchmove",c,r),P("drag",c,r)];return b(()=>{i.forEach(u=>u())})}function Ir({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:s}){if(s.mouseInteraction===!1)return()=>{};const d=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,l=[];let a=null;const c=i=>u=>{const h=Ce(u);if(H(h,n,o,!0))return;let p=null,f=i;if("pointerType"in u){switch(u.pointerType){case"mouse":p=ne.Mouse;break;case"touch":p=ne.Touch;break;case"pen":p=ne.Pen;break}p===ne.Touch?j[i]===j.MouseDown?f="TouchStart":j[i]===j.MouseUp&&(f="TouchEnd"):ne.Pen}else Ve(u)&&(p=ne.Touch);p!==null?(a=p,(f.startsWith("Touch")&&p===ne.Touch||f.startsWith("Mouse")&&p===ne.Mouse)&&(p=null)):j[i]===j.Click&&(p=a,a=null);const m=Ve(u)?u.changedTouches[0]:u;if(!m)return;const S=r.getId(h),{clientX:I,clientY:g}=m;b(e)(Object.assign({type:j[f],id:S,x:I,y:g},p!==null&&{pointerType:p}))};return Object.keys(j).filter(i=>Number.isNaN(Number(i))&&!i.endsWith("_Departed")&&d[i]!==!1).forEach(i=>{let u=le(i);const h=c(i);if(window.PointerEvent)switch(j[i]){case j.MouseDown:case j.MouseUp:u=u.replace("mouse","pointer");break;case j.TouchStart:case j.TouchEnd:return}l.push(P(u,h,t))}),b(()=>{l.forEach(i=>i())})}function Ct({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:s}){const d=b(Ie(b(l=>{const a=Ce(l);if(!a||H(a,n,o,!0))return;const c=r.getId(a);if(a===t&&t.defaultView){const i=lt(t.defaultView);e({id:c,x:i.left,y:i.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})}),s.scroll||100));return P("scroll",d,t)}function wr({viewportResizeCb:e},{win:t}){let r=-1,n=-1;const o=b(Ie(b(()=>{const s=dt(),d=ct();(r!==s||n!==d)&&(e({width:Number(d),height:Number(s)}),r=s,n=d)}),200));return P("resize",o,t)}function kt(e,t){const r=Object.assign({},e);return t||delete r.userTriggered,r}const Mr=["INPUT","TEXTAREA","SELECT"],Ot=new WeakMap;function Cr({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:s,ignoreSelector:d,maskInputOptions:l,maskInputFn:a,sampling:c,userTriggeredOnInput:i}){function u(g){let y=Ce(g);const C=g.isTrusted,x=y&&y.tagName;if(y&&x==="OPTION"&&(y=y.parentElement),!y||!x||Mr.indexOf(x)<0||H(y,n,o,!0)||y.classList.contains(s)||d&&y.matches(d))return;let E=y.value,_=!1;const k=je(y)||"";k==="radio"||k==="checkbox"?_=y.checked:(l[x.toLowerCase()]||l[k])&&(E=ze({element:y,maskInputOptions:l,tagName:x,type:k,value:E,maskInputFn:a})),h(y,b(kt)({text:E,isChecked:_,userTriggered:C},i));const X=y.name;k==="radio"&&X&&_&&t.querySelectorAll(`input[type="radio"][name="${X}"]`).forEach(U=>{U!==y&&h(U,b(kt)({text:U.value,isChecked:!_,userTriggered:!1},i))})}function h(g,y){const C=Ot.get(g);if(!C||C.text!==y.text||C.isChecked!==y.isChecked){Ot.set(g,y);const x=r.getId(g);b(e)(Object.assign(Object.assign({},y),{id:x}))}}const f=(c.input==="last"?["change"]:["input","change"]).map(g=>P(g,b(u),t)),m=t.defaultView;if(!m)return()=>{f.forEach(g=>g())};const S=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),I=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&f.push(...I.map(g=>Ne(g[0],g[1],{set(){b(u)({target:this,isTrusted:!1})}},!1,m))),b(()=>{f.forEach(g=>g())})}function De(e){const t=[];function r(n,o){if(Fe("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Fe("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Fe("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Fe("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const d=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(d)}else if(n.parentStyleSheet){const d=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(d)}return o}return r(e,t)}function oe(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function kr({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:b((i,u,h)=>{const[p,f]=h,{id:m,styleId:S}=oe(u,t,r.styleMirror);return(m&&m!==-1||S&&S!==-1)&&e({id:m,styleId:S,adds:[{rule:p,index:f}]}),i.apply(u,h)})});const s=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:b((i,u,h)=>{const[p]=h,{id:f,styleId:m}=oe(u,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,removes:[{index:p}]}),i.apply(u,h)})});let d;n.CSSStyleSheet.prototype.replace&&(d=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(d,{apply:b((i,u,h)=>{const[p]=h,{id:f,styleId:m}=oe(u,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,replace:p}),i.apply(u,h)})}));let l;n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:b((i,u,h)=>{const[p]=h,{id:f,styleId:m}=oe(u,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,replaceSync:p}),i.apply(u,h)})}));const a={};Ae("CSSGroupingRule")?a.CSSGroupingRule=n.CSSGroupingRule:(Ae("CSSMediaRule")&&(a.CSSMediaRule=n.CSSMediaRule),Ae("CSSConditionRule")&&(a.CSSConditionRule=n.CSSConditionRule),Ae("CSSSupportsRule")&&(a.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(a).forEach(([i,u])=>{c[i]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(c[i].insertRule,{apply:b((h,p,f)=>{const[m,S]=f,{id:I,styleId:g}=oe(p.parentStyleSheet,t,r.styleMirror);return(I&&I!==-1||g&&g!==-1)&&e({id:I,styleId:g,adds:[{rule:m,index:[...De(p),S||0]}]}),h.apply(p,f)})}),u.prototype.deleteRule=new Proxy(c[i].deleteRule,{apply:b((h,p,f)=>{const[m]=f,{id:S,styleId:I}=oe(p.parentStyleSheet,t,r.styleMirror);return(S&&S!==-1||I&&I!==-1)&&e({id:S,styleId:I,removes:[{index:[...De(p),m]}]}),h.apply(p,f)})})}),b(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=s,d&&(n.CSSStyleSheet.prototype.replace=d),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(a).forEach(([i,u])=>{u.prototype.insertRule=c[i].insertRule,u.prototype.deleteRule=c[i].deleteRule})})}function Tt({mirror:e,stylesheetManager:t},r){var n,o,s;let d=null;r.nodeName==="#document"?d=e.getId(r):d=e.getId(r.host);const l=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(s=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||s===void 0?void 0:s.ShadowRoot,a=l!=null&&l.prototype?Object.getOwnPropertyDescriptor(l==null?void 0:l.prototype,"adoptedStyleSheets"):void 0;return d===null||d===-1||!l||!a?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var c;return(c=a.get)===null||c===void 0?void 0:c.call(this)},set(c){var i;const u=(i=a.set)===null||i===void 0?void 0:i.call(this,c);if(d!==null&&d!==-1)try{t.adoptStyleSheets(c,d)}catch{}return u}}),b(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))}function Or({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:b((l,a,c)=>{var i;const[u,h,p]=c;if(r.has(u))return s.apply(a,[u,h,p]);const{id:f,styleId:m}=oe((i=a.parentRule)===null||i===void 0?void 0:i.parentStyleSheet,t,n.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:u,value:h,priority:p},index:De(a.parentRule)}),l.apply(a,c)})});const d=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(d,{apply:b((l,a,c)=>{var i;const[u]=c;if(r.has(u))return d.apply(a,[u]);const{id:h,styleId:p}=oe((i=a.parentRule)===null||i===void 0?void 0:i.parentStyleSheet,t,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,remove:{property:u},index:De(a.parentRule)}),l.apply(a,c)})}),b(()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=d})}function Tr({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o,doc:s}){const d=b(a=>Ie(b(c=>{const i=Ce(c);if(!i||H(i,t,r,!0))return;const{currentTime:u,volume:h,muted:p,playbackRate:f}=i;e({type:a,id:n.getId(i),currentTime:u,volume:h,muted:p,playbackRate:f})}),o.media||500)),l=[P("play",d(0),s),P("pause",d(1),s),P("seeked",d(2),s),P("volumechange",d(3),s),P("ratechange",d(4),s)];return b(()=>{l.forEach(a=>a())})}function xr({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,s=r.FontFace;r.FontFace=function(a,c,i){const u=new s(a,c,i);return o.set(u,{family:a,buffer:typeof c!="string",descriptors:i,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),u};const d=we(t.fonts,"add",function(l){return function(a){return setTimeout(b(()=>{const c=o.get(a);c&&(e(c),o.delete(a))}),0),l.apply(this,[a])}});return n.push(()=>{r.FontFace=s}),n.push(d),b(()=>{n.forEach(l=>l())})}function Rr(e){const{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:s}=e;let d=!0;const l=b(()=>{const a=t.getSelection();if(!a||d&&(a==null?void 0:a.isCollapsed))return;d=a.isCollapsed||!1;const c=[],i=a.rangeCount||0;for(let u=0;u<i;u++){const h=a.getRangeAt(u),{startContainer:p,startOffset:f,endContainer:m,endOffset:S}=h;H(p,n,o,!0)||H(m,n,o,!0)||c.push({start:r.getId(p),startOffset:f,end:r.getId(m),endOffset:S})}s({ranges:c})});return l(),P("selectionchange",l)}function Lr(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:d,inputCb:l,mediaInteractionCb:a,styleSheetRuleCb:c,styleDeclarationCb:i,canvasMutationCb:u,fontCb:h,selectionCb:p}=e;e.mutationCb=(...f)=>{t.mutation&&t.mutation(...f),r(...f)},e.mousemoveCb=(...f)=>{t.mousemove&&t.mousemove(...f),n(...f)},e.mouseInteractionCb=(...f)=>{t.mouseInteraction&&t.mouseInteraction(...f),o(...f)},e.scrollCb=(...f)=>{t.scroll&&t.scroll(...f),s(...f)},e.viewportResizeCb=(...f)=>{t.viewportResize&&t.viewportResize(...f),d(...f)},e.inputCb=(...f)=>{t.input&&t.input(...f),l(...f)},e.mediaInteractionCb=(...f)=>{t.mediaInteaction&&t.mediaInteaction(...f),a(...f)},e.styleSheetRuleCb=(...f)=>{t.styleSheetRule&&t.styleSheetRule(...f),c(...f)},e.styleDeclarationCb=(...f)=>{t.styleDeclaration&&t.styleDeclaration(...f),i(...f)},e.canvasMutationCb=(...f)=>{t.canvasMutation&&t.canvasMutation(...f),u(...f)},e.fontCb=(...f)=>{t.font&&t.font(...f),h(...f)},e.selectionCb=(...f)=>{t.selection&&t.selection(...f),p(...f)}}function Er(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};Lr(e,t);let n;e.recordDOM&&(n=Mt(e,e.doc));const o=br(e),s=Ir(e),d=Ct(e),l=wr(e,{win:r}),a=Cr(e),c=Tr(e);let i=()=>{},u=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(i=kr(e,{win:r}),u=Tt(e,e.doc),h=Or(e,{win:r}),e.collectFonts&&(p=xr(e)));const f=Rr(e),m=[];for(const S of e.plugins)m.push(S.observer(S.callback,r,S.options));return b(()=>{de.forEach(S=>S.reset()),n==null||n.disconnect(),o(),s(),d(),l(),a(),c(),i(),u(),h(),p(),f(),m.forEach(S=>S())})}function Fe(e){return typeof window[e]<"u"}function Ae(e){return Boolean(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class xt{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){const s=n||this.getIdToRemoteIdMap(t),d=o||this.getRemoteIdToIdMap(t);let l=s.get(r);return l||(l=this.generateIdFn(),s.set(r,l),d.set(l,r)),l}getIds(t,r){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(s=>this.getId(t,s,n,o))}getRemoteId(t,r,n){const o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const s=o.get(r);return s||-1}getRemoteIds(t,r){const n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class Nr{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new xt(rt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new xt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const r=t;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!t.source)return;const o=this.crossOriginIframeMap.get(t.source);if(!o)return;const s=this.transformCrossOriginEvent(o,r.data.event);s&&this.wrappedEmit(s,r.data.isCheckout)}transformCrossOriginEvent(t,r){var n;switch(r.type){case M.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);const o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:M.IncrementalSnapshot,data:{source:w.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case M.Meta:case M.Load:case M.DomContentLoaded:return!1;case M.Plugin:return r;case M.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case M.IncrementalSnapshot:switch(r.data.source){case w.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(o.node,s)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case w.Drag:case w.TouchMove:case w.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case w.ViewportResize:return!1;case w.MediaInteraction:case w.MouseInteraction:case w.Scroll:case w.CanvasMutation:case w.Input:return this.replaceIds(r.data,t,["id"]),r;case w.StyleSheetRule:case w.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case w.Font:return r;case w.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case w.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(const s of o)!Array.isArray(r[s])&&typeof r[s]!="number"||(Array.isArray(r[s])?r[s]=t.getIds(n,r[s]):r[s]=t.getId(n,r[s]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(t,r){t.type!==F.Document&&!t.rootId&&(t.rootId=r),"childNodes"in t&&t.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}class _r{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(!ve(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=Mt(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Ct(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Tt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,r){const n=this;this.restoreHandlers.push(we(t.prototype,"attachShadow",function(o){return function(s){const d=o.call(this,s);return this.shadowRoot&&yt(this)&&n.addShadowRoot(this.shadowRoot,r),d}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Dr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Fr(e,t,r,n){function o(s){return s instanceof r?s:new r(function(d){d(s)})}return new(r||(r=Promise))(function(s,d){function l(i){try{c(n.next(i))}catch(u){d(u)}}function a(i){try{c(n.throw(i))}catch(u){d(u)}}function c(i){i.done?s(i.value):o(i.value).then(l,a)}c((n=n.apply(e,t||[])).next())})}for(var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ar=typeof Uint8Array>"u"?[]:new Uint8Array(256),We=0;We<ge.length;We++)Ar[ge.charCodeAt(We)]=We;var Wr=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=ge[t[r]>>2],o+=ge[(t[r]&3)<<4|t[r+1]>>4],o+=ge[(t[r+1]&15)<<2|t[r+2]>>6],o+=ge[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Rt=new Map;function Pr(e,t){let r=Rt.get(e);return r||(r=new Map,Rt.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const Lt=(e,t,r)=>{if(!e||!(Nt(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=Pr(r,n);let s=o.indexOf(e);return s===-1&&(s=o.length,o.push(e)),s};function Pe(e,t,r){if(e instanceof Array)return e.map(n=>Pe(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=Wr(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Pe(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Pe(e.data,t,r),e.width,e.height]};if(Nt(e,t)||typeof e=="object"){const n=e.constructor.name,o=Lt(e,t,r);return{rr_type:n,index:o}}}}return e}const Et=(e,t,r)=>[...e].map(n=>Pe(n,t,r)),Nt=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function");return Boolean(n.find(o=>e instanceof t[o]))};function Hr(e,t,r,n){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const d of s)try{if(typeof t.CanvasRenderingContext2D.prototype[d]!="function")continue;const l=we(t.CanvasRenderingContext2D.prototype,d,function(a){return function(...c){return H(this.canvas,r,n,!0)||setTimeout(()=>{const i=Et([...c],t,this);e(this.canvas,{type:ye["2D"],property:d,args:i})},0),a.apply(this,c)}});o.push(l)}catch{const a=Ne(t.CanvasRenderingContext2D.prototype,d,{set(c){e(this.canvas,{type:ye["2D"],property:d,args:[c],setter:!0})}});o.push(a)}return()=>{o.forEach(d=>d())}}function Ur(e){return e==="experimental-webgl"?"webgl":e}function _t(e,t,r,n){const o=[];try{const s=we(e.HTMLCanvasElement.prototype,"getContext",function(d){return function(l,...a){if(!H(this,t,r,!0)){const c=Ur(l);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(a[0]&&typeof a[0]=="object"){const i=a[0];i.preserveDrawingBuffer||(i.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return d.apply(this,[l,...a])}});o.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(s=>s())}}function Dt(e,t,r,n,o,s,d){const l=[],a=Object.getOwnPropertyNames(e);for(const c of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if(typeof e[c]!="function")continue;const i=we(e,c,function(u){return function(...h){const p=u.apply(this,h);if(Lt(p,d,this),"tagName"in this.canvas&&!H(this.canvas,n,o,!0)){const f=Et([...h],d,this),m={type:t,property:c,args:f};r(this.canvas,m)}return p}});l.push(i)}catch{const u=Ne(e,c,{set(h){r(this.canvas,{type:t,property:c,args:[h],setter:!0})}});l.push(u)}return l}function zr(e,t,r,n,o){const s=[];return s.push(...Dt(t.WebGLRenderingContext.prototype,ye.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...Dt(t.WebGL2RenderingContext.prototype,ye.WebGL2,e,r,n,o,t)),()=>{s.forEach(d=>d())}}function jr(e,t){var r=t===void 0?null:t,n=e.toString(),o=n.split(`
`);o.pop(),o.shift();for(var s=o[0].search(/\S/),d=/(['"])__worker_loader_strict__(['"])/g,l=0,a=o.length;l<a;++l)o[l]=o[l].substring(s).replace(d,"$1use strict$2")+`
`;return r&&o.push("//# sourceMappingURL="+r+`
`),o}function Br(e,t){var r=jr(e,t),n=new Blob(r,{type:"application/javascript"});return URL.createObjectURL(n)}function Gr(e,t){var r;return function(o){return r=r||Br(e,t),new Worker(r,o)}}var Vr=Gr(function(){(function(){/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */function e(c,i,u,h){function p(f){return f instanceof u?f:new u(function(m){m(f)})}return new(u||(u=Promise))(function(f,m){function S(y){try{g(h.next(y))}catch(C){m(C)}}function I(y){try{g(h.throw(y))}catch(C){m(C)}}function g(y){y.done?f(y.value):p(y.value).then(S,I)}g((h=h.apply(c,i||[])).next())})}for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;var o=function(c){var i=new Uint8Array(c),u,h=i.length,p="";for(u=0;u<h;u+=3)p+=t[i[u]>>2],p+=t[(i[u]&3)<<4|i[u+1]>>4],p+=t[(i[u+1]&15)<<2|i[u+2]>>6],p+=t[i[u+2]&63];return h%3===2?p=p.substring(0,p.length-1)+"=":h%3===1&&(p=p.substring(0,p.length-2)+"=="),p};const s=new Map,d=new Map;function l(c,i,u){return e(this,void 0,void 0,function*(){const h=`${c}-${i}`;if("OffscreenCanvas"in globalThis){if(d.has(h))return d.get(h);const p=new OffscreenCanvas(c,i);p.getContext("2d");const m=yield(yield p.convertToBlob(u)).arrayBuffer(),S=o(m);return d.set(h,S),S}else return""})}const a=self;a.onmessage=function(c){return e(this,void 0,void 0,function*(){if("OffscreenCanvas"in globalThis){const{id:i,bitmap:u,width:h,height:p,dataURLOptions:f}=c.data,m=l(h,p,f),S=new OffscreenCanvas(h,p);S.getContext("2d").drawImage(u,0,0),u.close();const g=yield S.convertToBlob(f),y=g.type,C=yield g.arrayBuffer(),x=o(C);if(!s.has(i)&&(yield m)===x)return s.set(i,x),a.postMessage({id:i});if(s.get(i)===x)return a.postMessage({id:i});a.postMessage({id:i,type:y,base64:x,width:h,height:p}),s.set(i,x)}else return a.postMessage({id:c.data.id})})}})()},null);class qr{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{sampling:r="all",win:n,blockClass:o,blockSelector:s,recordCanvas:d,dataURLOptions:l}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,d&&r==="all"&&this.initCanvasMutationObserver(n,o,s),d&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,s,{dataURLOptions:l})}initCanvasFPSObserver(t,r,n,o,s){const d=_t(r,n,o,!0),l=new Map,a=new Vr;a.onmessage=f=>{const{id:m}=f.data;if(l.set(m,!1),!("base64"in f.data))return;const{base64:S,type:I,width:g,height:y}=f.data;this.mutationCb({id:m,type:ye["2D"],commands:[{property:"clearRect",args:[0,0,g,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:I}]},0,0]}]})};const c=1e3/t;let i=0,u;const h=()=>{const f=[];return r.document.querySelectorAll("canvas").forEach(m=>{H(m,n,o,!0)||f.push(m)}),f},p=f=>{if(i&&f-i<c){u=requestAnimationFrame(p);return}i=f,h().forEach(m=>Fr(this,void 0,void 0,function*(){var S;const I=this.mirror.getId(m);if(l.get(I))return;if(l.set(I,!0),["webgl","webgl2"].includes(m.__context)){const y=m.getContext(m.__context);((S=y==null?void 0:y.getContextAttributes())===null||S===void 0?void 0:S.preserveDrawingBuffer)===!1&&y.clear(y.COLOR_BUFFER_BIT)}const g=yield createImageBitmap(m);a.postMessage({id:I,bitmap:g,width:m.width,height:m.height,dataURLOptions:s.dataURLOptions},[g])})),u=requestAnimationFrame(p)};u=requestAnimationFrame(p),this.resetObservers=()=>{d(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=_t(t,r,n,!1),s=Hr(this.processMutation.bind(this),t,r,n),d=zr(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),s(),d()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;const o=n.map(d=>Dr(d,["type"])),{type:s}=n[0];this.mutationCb({id:r,type:s,commands:o}),this.pendingCanvasMutations.delete(t)}}class $r{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new pr,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const n={id:r,styleIds:[]},o=[];for(const s of t){let d;this.styleMirror.has(s)?d=this.styleMirror.getId(s):(d=this.styleMirror.add(s),o.push({styleId:d,rules:Array.from(s.rules||CSSRule,(l,a)=>({rule:Ke(l),index:a}))})),n.styleIds.push(d)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Xr{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,r){const n=this.nodeMap.get(t);return n&&Array.from(n).some(o=>o!==r)}add(t,r){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function A(e){return Object.assign(Object.assign({},e),{timestamp:_e()})}let L,He,Xe,Ue=!1;const Z=jt();function ke(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:d="rr-ignore",ignoreSelector:l=null,maskTextClass:a="rr-mask",maskTextSelector:c=null,inlineStylesheet:i=!0,maskAllInputs:u,maskInputOptions:h,slimDOMOptions:p,maskInputFn:f,maskTextFn:m,hooks:S,packFn:I,sampling:g={},dataURLOptions:y={},mousemoveWait:C,recordDOM:x=!0,recordCanvas:E=!1,recordCrossOriginIframes:_=!1,recordAfter:k=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:X=!1,collectFonts:U=!1,inlineImages:G=!1,plugins:V,keepIframeSrcFn:B=()=>!1,ignoreCSSAttributes:ae=new Set([]),errorHandler:D}=e;Sr(D);const Y=_?window.parent===window:!0;let J=!1;if(!Y)try{window.parent.document&&(J=!1)}catch{J=!0}if(Y&&!t)throw new Error("emit function is required");C!==void 0&&g.mousemove===void 0&&(g.mousemove=C),Z.reset();const Q=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:h!==void 0?h:{password:!0},q=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};fr();let K,$=0;const N=v=>{for(const W of V||[])W.eventProcessor&&(v=W.eventProcessor(v));return I&&!J&&(v=I(v)),v};L=(v,W)=>{var T;if(((T=de[0])===null||T===void 0?void 0:T.isFrozen())&&v.type!==M.FullSnapshot&&!(v.type===M.IncrementalSnapshot&&v.data.source===w.Mutation)&&de.forEach(z=>z.unfreeze()),Y)t==null||t(N(v),W);else if(J){const z={type:"rrweb",event:N(v),origin:window.location.origin,isCheckout:W};window.parent.postMessage(z,"*")}if(v.type===M.FullSnapshot)K=v,$=0;else if(v.type===M.IncrementalSnapshot){if(v.data.source===w.Mutation&&v.data.isAttachIframe)return;$++;const z=n&&$>=n,ue=r&&v.timestamp-K.timestamp>r;(z||ue)&&He(!0)}};const se=v=>{L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.Mutation},v)}))},Oe=v=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.Scroll},v)})),Te=v=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.CanvasMutation},v)})),xe=v=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.AdoptedStyleSheet},v)})),te=new $r({mutationCb:se,adoptedStyleSheetCb:xe}),ee=new Nr({mirror:Z,mutationCb:se,stylesheetManager:te,recordCrossOriginIframes:_,wrappedEmit:L});for(const v of V||[])v.getMirror&&v.getMirror({nodeMirror:Z,crossOriginIframeMirror:ee.crossOriginIframeMirror,crossOriginIframeStyleMirror:ee.crossOriginIframeStyleMirror});const re=new Xr;Xe=new qr({recordCanvas:E,mutationCb:Te,win:window,blockClass:o,blockSelector:s,mirror:Z,sampling:g.canvas,dataURLOptions:y});const ie=new _r({mutationCb:se,scrollCb:Oe,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:i,maskInputOptions:Q,dataURLOptions:y,maskTextFn:m,maskInputFn:f,recordCanvas:E,inlineImages:G,sampling:g,slimDOMOptions:q,iframeManager:ee,stylesheetManager:te,canvasManager:Xe,keepIframeSrcFn:B,processedNodeManager:re},mirror:Z});He=(v=!1)=>{if(!x)return;L(A({type:M.Meta,data:{href:window.location.href,width:ct(),height:dt()}}),v),te.reset(),ie.init(),de.forEach(T=>T.lock());const W=cr(document,{mirror:Z,blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:i,maskAllInputs:Q,maskTextFn:m,slimDOM:q,dataURLOptions:y,recordCanvas:E,inlineImages:G,onSerialize:T=>{pt(T,Z)&&ee.addIframe(T),ht(T,Z)&&te.trackLinkElement(T),qe(T)&&ie.addShadowRoot(T.shadowRoot,document)},onIframeLoad:(T,z)=>{ee.attachIframe(T,z),ie.observeAttachShadow(T)},onStylesheetLoad:(T,z)=>{te.attachLinkElement(T,z)},keepIframeSrcFn:B});if(!W)return console.warn("Failed to snapshot the document");L(A({type:M.FullSnapshot,data:{node:W,initialOffset:lt(window)}}),v),de.forEach(T=>T.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&te.adoptStyleSheets(document.adoptedStyleSheets,Z.getId(document))};try{const v=[],W=z=>{var ue;return b(Er)({mutationCb:se,mousemoveCb:(R,Qe)=>L(A({type:M.IncrementalSnapshot,data:{source:Qe,positions:R}})),mouseInteractionCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.MouseInteraction},R)})),scrollCb:Oe,viewportResizeCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.ViewportResize},R)})),inputCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.Input},R)})),mediaInteractionCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.MediaInteraction},R)})),styleSheetRuleCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.StyleSheetRule},R)})),styleDeclarationCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.StyleDeclaration},R)})),canvasMutationCb:Te,fontCb:R=>L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.Font},R)})),selectionCb:R=>{L(A({type:M.IncrementalSnapshot,data:Object.assign({source:w.Selection},R)}))},blockClass:o,ignoreClass:d,ignoreSelector:l,maskTextClass:a,maskTextSelector:c,maskInputOptions:Q,inlineStylesheet:i,sampling:g,recordDOM:x,recordCanvas:E,inlineImages:G,userTriggeredOnInput:X,collectFonts:U,doc:z,maskInputFn:f,maskTextFn:m,keepIframeSrcFn:B,blockSelector:s,slimDOMOptions:q,dataURLOptions:y,mirror:Z,iframeManager:ee,stylesheetManager:te,shadowDomManager:ie,processedNodeManager:re,canvasManager:Xe,ignoreCSSAttributes:ae,plugins:((ue=V==null?void 0:V.filter(R=>R.observer))===null||ue===void 0?void 0:ue.map(R=>({observer:R.observer,options:R.options,callback:Qe=>L(A({type:M.Plugin,data:{plugin:R.name,payload:Qe}}))})))||[]},S)};ee.addLoadListener(z=>{try{v.push(W(z.contentDocument))}catch(ue){console.warn(ue)}});const T=()=>{He(),v.push(W(document)),Ue=!0};return document.readyState==="interactive"||document.readyState==="complete"?T():(v.push(P("DOMContentLoaded",()=>{L(A({type:M.DomContentLoaded,data:{}})),k==="DOMContentLoaded"&&T()})),v.push(P("load",()=>{L(A({type:M.Load,data:{}})),k==="load"&&T()},window))),()=>{v.forEach(z=>z()),re.destroy(),Ue=!1,vr()}}catch(v){console.warn(v)}}ke.addCustomEvent=(e,t)=>{if(!Ue)throw new Error("please add custom event after start recording");L(A({type:M.Custom,data:{tag:e,payload:t}}))},ke.freezePage=()=>{de.forEach(e=>e.freeze())},ke.takeFullSnapshot=e=>{if(!Ue)throw new Error("please take full snapshot after start recording");He(e)},ke.mirror=Z;var ce=(e=>(e.RecordScriptReady="rrweb-extension-record-script-ready",e.StartRecord="rrweb-extension-start-record",e.RecordStarted="rrweb-extension-record-started",e.StopRecord="rrweb-extension-stop-record",e.RecordStopped="rrweb-extension-record-stopped",e.EmitEvent="rrweb-extension-emit-event",e))(ce||{});function Yr(){if(window.parent!==window)try{window.parent.location.origin}catch{return!0}return!1}const Ye=[];let Je=null;function Jr(e){Ye.length=0,Je=ke({emit:t=>{Ye.push(t),Ze({message:ce.EmitEvent,event:t})},...e})||null,Ze({message:ce.RecordStarted,startTimestamp:Date.now()})}const Ft=e=>{if(e.source!==window)return;const t=e.data,r={[ce.StartRecord]:()=>{Jr(t.config||{})},[ce.StopRecord]:()=>{if(Je)try{Je()}catch{}Ze({message:ce.RecordStopped,events:Ye,endTimestamp:Date.now()}),window.removeEventListener("message",Ft)}};r[t.message]&&r[t.message]()};function Ze(e){Yr()||window.postMessage(e,location.origin)}window.addEventListener("message",Ft),window.postMessage({message:ce.RecordScriptReady},location.origin)})();
